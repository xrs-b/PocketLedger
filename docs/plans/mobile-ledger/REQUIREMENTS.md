# 移动账本需求分析

> 生成时间: 2026-02-08
> 状态: 待开发

---

## 一、核心功能

### 1.1 日常记账
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 快速记账 | 一键记账，最少操作步骤 | P0 |
| 收入/支出 | 区分收入和支出 | P0 |
| 分类选择 | 餐饮、交通、购物、娱乐等 | P0 |
| 日期时间 | 自动获取当前时间 | P0 |
| 备注说明 | 可选添加备注 | P1 |
| 支付方式 | 现金、银行卡、支付宝、微信等 | P1 |

### 1.2 项目记账
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 创建项目 | 自由填写项目名称 | P0 |
| 项目独立账本 | 每个项目独立核算 | P0 |
| 项目参与者 | 添加参与人，AA制/轮流付 | P1 |
| 项目状态 | 进行中、已完成 | P1 |
| 项目统计 | 项目完成后自动统计 | P1 |

### 1.3 多维度统计报表
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 日常统计 | 日常记账的月度/年度报表 | P0 |
| 项目统计 | 各项目的独立统计 | P0 |
| 交叉分析 | 日常 + 项目交叉对比 | P0 |
| 分类图表 | 饼图展示分类占比 | P0 |
| 趋势图表 | 折线图展示收支趋势 | P1 |
| 导出报表 | 导出 Excel/PDF | P2 |

---

## 二、用户体验设计

### 2.1 快速记账流程
```
打开APP → 选择类型(收入/支出) → 选择分类 → 输入金额 → 保存
       ↓
  (智能预判) → 根据时间段自动推荐分类
  例如: 午餐时间打开 → 默认"餐饮"分类
```

### 2.2 界面设计原则
- ✅ 简洁明了，减少视觉干扰
- ✅ 操作流程简单，3步内完成记账
- ✅ 大按钮，适合单手操作
- ✅ 深色模式支持

### 2.3 移动端适配
- 响应式设计，适配各种屏幕尺寸
- 离线记账功能 (网络恢复后自动同步)
- 推送提醒 (每日记账提醒)

---

## 三、数据模型设计

### 3.1 日常记账
```yaml
日常记录:
  - id: 唯一标识
  - type: 收入/支出
  - category_id: 分类ID
  - amount: 金额
  - date: 日期时间
  - remark: 备注
  - payment_method: 支付方式
  - project_id: 关联项目ID (可选)
```

### 3.2 项目
```yaml
项目:
  - id: 唯一标识
  - name: 项目名称
  - description: 项目描述
  - status: 进行中/已完成
  - created_at: 创建时间
  - completed_at: 完成时间
```

### 3.3 项目参与者
```yaml
项目参与者:
  - id: 唯一标识
  - project_id: 项目ID
  - user_name: 参与者名称
  - is_owner: 是否是发起人
```

---

## 四、技术架构

### 4.1 前端
- **框架:** Vue 3 + Vite (已有经验)
- **UI库:** Element Plus (已有经验)
- **状态管理:** Pinia (已有经验)
- **图表库:** ECharts / Chart.js

### 4.2 后端
- **框架:** Python FastAPI (已有 PocketLedger 经验)
- **数据库:** SQLite (轻量) / MySQL (需要对比)

### 4.3 部署架构 (云服务器 7x24)
```
┌─────────────────────────────────────────────┐
│              Nginx (80/443)                 │
├─────────────────────────────────────────────┤
│        前端 (静态文件)                      │
├─────────────────────────────────────────────┤
│        后端 API (FastAPI)                   │
├─────────────────────────────────────────────┤
│        数据库 (SQLite/MySQL)                │
└─────────────────────────────────────────────┘
```

### 4.4 Docker 部署
```yaml
version: '3.8'

services:
  app:
    image: python:3.12-slim
    ports: ["8000:8000"]
    volumes:
      - ./app:/code
    command: uvicorn main:app --host 0.0.0.0 --port 8000
```

---

## 五、参考应用分析

### 5.1 钱迹
**优点:**
- 清晰的资产管理
- 报销、借出、借入专用功能
- 多维度统计报表

**可借鉴:**
- 分类图标设计
- 资产管理界面

### 5.2 cashbook (Docker部署)
**优点:**
- 部署简单，一键安装
- 功能不多但实用
- 开源免费

**可借鉴:**
- Docker 一键部署方案
- 简洁的功能设计

### 5.3 ezBookkeeping
**优点:**
- 支持多账本
- 多币种支持
- PC和移动端体验都好

**可借鉴:**
- 多账本设计模式
- 多币种数据结构

---

## 六、开发计划 (待确认)

### Phase 1: 基础功能
- [ ] 用户认证
- [ ] 日常记账 CRUD
- [ ] 分类管理
- [ ] 基础统计

### Phase 2: 项目记账
- [ ] 项目创建/管理
- [ ] 项目参与者
- [ ] 项目独立统计

### Phase 3: 高级功能
- [ ] 多维度交叉统计
- [ ] 数据可视化图表
- [ ] 数据导出

### Phase 4: 部署优化
- [ ] Docker 一键部署
- [ ] 云服务器部署
- [ ] 数据备份恢复

---

## 七、待确认问题

1. **数据库选择** - SQLite 还是 MySQL？
2. **是否需要用户系统** - 独立注册还是匿名使用？
3. **多设备同步** - 是否需要云端同步功能？
4. **数据安全** - 是否需要加密存储？

---

*文档版本: 1.0*
*最后更新: 2026-02-08*
